{"ast":null,"code":"var _jsxFileName = \"/Users/yiyuzhang/NEU/cs5610/Mingyi-SHI-Yiyu-ZHANG-Proj3-Web-app/src/components/PostForm.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { Button, Form } from \"semantic-ui-react\";\nimport gql from \"graphql-tag\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { useForm } from \"../utils/hooks\";\nimport { FETCH_POSTS_QUERY } from \"../utils/graphql\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst PostForm = () => {\n  _s();\n\n  const {\n    values,\n    onChange,\n    onSubmit\n  } = useForm(createPostCallback, {\n    title: \"\",\n    director: \"\",\n    year: \"\"\n  });\n  const [createPost, {\n    error\n  }] = useMutation(CREATE_POST_MUTATION, {\n    variables: values,\n    update: (proxy, result) => {\n      const data = proxy.readQuery({\n        query: FETCH_POSTS_QUERY\n      });\n      console.log(values);\n      proxy.writeQuery({\n        query: FETCH_POSTS_QUERY,\n        data: {\n          getPosts: [result.data.createPost, ...data.getPosts]\n        }\n      });\n      values.title = \"\";\n      values.director = \"\";\n      values.year = \"\";\n    }\n  });\n\n  function createPostCallback() {\n    createPost();\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: onSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Create a movie post:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Input, {\n          placeholder: \"Title...\",\n          name: \"title\",\n          onChange: onChange,\n          value: values.title,\n          error: error ? true : false,\n          color: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n          placeholder: \"Director...\",\n          name: \"director\",\n          onChange: onChange,\n          value: values.director,\n          error: error ? true : false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n          placeholder: \"Release Year...\",\n          name: \"year\",\n          onChange: onChange,\n          value: values.year,\n          error: error ? true : false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          color: \"teal\",\n          disabled: values.title.trim() === \"\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 4\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ui error message\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"list\",\n        children: /*#__PURE__*/_jsxDEV(\"li\", {\n          children: error.graphQLErrors[0].message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n};\n\n_s(PostForm, \"upPCav/qNTfBrUEFe7bmdjw70wA=\", false, function () {\n  return [useForm, useMutation];\n});\n\n_c = PostForm;\nconst CREATE_POST_MUTATION = gql`\n\tmutation createPost($title: String!, $director: String!, $year: String!) {\n\t\tcreatePost(title: $title, director: $director, year: $year) {\n\t\t\tid\n\t\t\ttitle\n\t\t\tdirector\n\t\t\tyear\n\t\t\tcreatedAt\n\t\t\tusername\n\t\t\tlikes {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\tcreatedAt\n\t\t\t}\n\t\t\tlikeCount\n\t\t\tcomments {\n\t\t\t\tid\n\t\t\t\tbody\n\t\t\t\tusername\n\t\t\t\tcreatedAt\n\t\t\t}\n\t\t\tcommentCount\n\t\t}\n\t}\n`;\nexport default PostForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostForm\");","map":{"version":3,"sources":["/Users/yiyuzhang/NEU/cs5610/Mingyi-SHI-Yiyu-ZHANG-Proj3-Web-app/src/components/PostForm.js"],"names":["React","Button","Form","gql","useMutation","useForm","FETCH_POSTS_QUERY","PostForm","values","onChange","onSubmit","createPostCallback","title","director","year","createPost","error","CREATE_POST_MUTATION","variables","update","proxy","result","data","readQuery","query","console","log","writeQuery","getPosts","trim","graphQLErrors","message"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Button, Form } from \"semantic-ui-react\";\nimport gql from \"graphql-tag\";\nimport { useMutation } from \"@apollo/react-hooks\";\n\nimport { useForm } from \"../utils/hooks\";\nimport { FETCH_POSTS_QUERY } from \"../utils/graphql\";\n\nconst PostForm = () => {\n\tconst { values, onChange, onSubmit } = useForm(createPostCallback, {\n\t\ttitle: \"\",\n\t\tdirector: \"\",\n\t\tyear: \"\",\n\t});\n\n\tconst [createPost, { error }] = useMutation(CREATE_POST_MUTATION, {\n\t\tvariables: values,\n\t\tupdate: (proxy, result) => {\n\t\t\tconst data = proxy.readQuery({ query: FETCH_POSTS_QUERY });\n\t\t\tconsole.log(values);\n\t\t\tproxy.writeQuery({\n\t\t\t\tquery: FETCH_POSTS_QUERY,\n\t\t\t\tdata: {\n\t\t\t\t\tgetPosts: [result.data.createPost, ...data.getPosts],\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tvalues.title = \"\";\n\t\t\tvalues.director = \"\";\n\t\t\tvalues.year = \"\";\n\t\t},\n\t});\n\n\tfunction createPostCallback() {\n\t\tcreatePost();\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Form onSubmit={onSubmit}>\n\t\t\t\t<h2>Create a movie post:</h2>\n\t\t\t\t<Form.Field>\n\t\t\t\t\t<Form.Input\n\t\t\t\t\t\tplaceholder='Title...'\n\t\t\t\t\t\tname='title'\n\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\tvalue={values.title}\n\t\t\t\t\t\terror={error ? true : false}\n\t\t\t\t\t\tcolor=''\n\t\t\t\t\t/>\n\t\t\t\t\t<Form.Input\n\t\t\t\t\t\tplaceholder='Director...'\n\t\t\t\t\t\tname='director'\n\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\tvalue={values.director}\n\t\t\t\t\t\terror={error ? true : false}\n\t\t\t\t\t/>\n\t\t\t\t\t<Form.Input\n\t\t\t\t\t\tplaceholder='Release Year...'\n\t\t\t\t\t\tname='year'\n\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\tvalue={values.year}\n\t\t\t\t\t\terror={error ? true : false}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\tcolor='teal'\n\t\t\t\t\t\tdisabled={values.title.trim() === \"\"}\n\t\t\t\t\t>\n\t\t\t\t\t\tSubmit\n\t\t\t\t\t</Button>\n\t\t\t\t</Form.Field>\n\t\t\t</Form>\n\t\t\t{error && (\n\t\t\t\t<div className='ui error message'>\n\t\t\t\t\t<ul className='list'>\n\t\t\t\t\t\t<li>{error.graphQLErrors[0].message}</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nconst CREATE_POST_MUTATION = gql`\n\tmutation createPost($title: String!, $director: String!, $year: String!) {\n\t\tcreatePost(title: $title, director: $director, year: $year) {\n\t\t\tid\n\t\t\ttitle\n\t\t\tdirector\n\t\t\tyear\n\t\t\tcreatedAt\n\t\t\tusername\n\t\t\tlikes {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t\tcreatedAt\n\t\t\t}\n\t\t\tlikeCount\n\t\t\tcomments {\n\t\t\t\tid\n\t\t\t\tbody\n\t\t\t\tusername\n\t\t\t\tcreatedAt\n\t\t\t}\n\t\t\tcommentCount\n\t\t}\n\t}\n`;\n\nexport default PostForm;\n"]},"metadata":{},"sourceType":"module"}