{"ast":null,"code":"var _jsxFileName = \"/Users/yiyuzhang/NEU/cs5610/Mingyi-SHI-Yiyu-ZHANG-Proj3-Web-app/src/components/LikeButton.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\nimport { Icon, Button, Label } from \"semantic-ui-react\";\nimport MyPopup from \"../utils/MyPopup\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const LikeButton = _ref => {\n  _s();\n\n  let {\n    user,\n    post: {\n      id,\n      likeCount,\n      likes\n    }\n  } = _ref;\n  const [liked, setLiked] = useState(false);\n  useEffect(() => {\n    if (user && likes.find(like => like.username === user.username)) {\n      setLiked(true);\n    } else setLiked(false);\n  }, [user, likes]);\n  const [likePost] = useMutation(LIKE_POST_MUTATION, {\n    variables: {\n      postId: id\n    }\n  });\n  const likeButton = user ? liked ? /*#__PURE__*/_jsxDEV(Button, {\n    color: \"red\",\n    children: /*#__PURE__*/_jsxDEV(Icon, {\n      name: \"thumbs\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 4\n  }, this) : /*#__PURE__*/_jsxDEV(Button, {\n    color: \"green\",\n    basic: true,\n    children: /*#__PURE__*/_jsxDEV(Icon, {\n      name: \"heart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 4\n  }, this) : /*#__PURE__*/_jsxDEV(Button, {\n    as: Link,\n    to: \"/login\",\n    color: \"teal\",\n    basic: true,\n    children: /*#__PURE__*/_jsxDEV(Icon, {\n      name: \"heart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 3\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Button, {\n    as: \"div\",\n    labelPosition: \"right\",\n    onClick: likePost,\n    children: [/*#__PURE__*/_jsxDEV(MyPopup, {\n      content: liked ? \"Unlike post\" : \"Like post\",\n      children: likeButton\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Label, {\n      basic: true,\n      color: \"teal\",\n      pointing: \"left\",\n      children: likeCount\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 3\n  }, this);\n};\n\n_s(LikeButton, \"J+UxPd70Y5eO9tzmE8G4tIdRcGc=\", false, function () {\n  return [useMutation];\n});\n\n_c = LikeButton;\nconst LIKE_POST_MUTATION = gql`\n\tmutation likePost($postId: ID!) {\n\t\tlikePost(postId: $postId) {\n\t\t\tid\n\t\t\tlikes {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t}\n\t\t\tlikeCount\n\t\t}\n\t}\n`;\nexport default LikeButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"LikeButton\");","map":{"version":3,"sources":["/Users/yiyuzhang/NEU/cs5610/Mingyi-SHI-Yiyu-ZHANG-Proj3-Web-app/src/components/LikeButton.js"],"names":["React","useEffect","useState","Link","useMutation","gql","Icon","Button","Label","MyPopup","LikeButton","user","post","id","likeCount","likes","liked","setLiked","find","like","username","likePost","LIKE_POST_MUTATION","variables","postId","likeButton"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAASC,IAAT,EAAeC,MAAf,EAAuBC,KAAvB,QAAoC,mBAApC;AAEA,OAAOC,OAAP,MAAoB,kBAApB;;AAEA,OAAO,MAAMC,UAAU,GAAG,QAA8C;AAAA;;AAAA,MAA7C;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,IAAI,EAAE;AAAEC,MAAAA,EAAF;AAAMC,MAAAA,SAAN;AAAiBC,MAAAA;AAAjB;AAAd,GAA6C;AACvE,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBf,QAAQ,CAAC,KAAD,CAAlC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACf,QAAIU,IAAI,IAAII,KAAK,CAACG,IAAN,CAAYC,IAAD,IAAUA,IAAI,CAACC,QAAL,KAAkBT,IAAI,CAACS,QAA5C,CAAZ,EAAmE;AAClEH,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACA,KAFD,MAEOA,QAAQ,CAAC,KAAD,CAAR;AACP,GAJQ,EAIN,CAACN,IAAD,EAAOI,KAAP,CAJM,CAAT;AAMA,QAAM,CAACM,QAAD,IAAajB,WAAW,CAACkB,kBAAD,EAAqB;AAClDC,IAAAA,SAAS,EAAE;AAAEC,MAAAA,MAAM,EAAEX;AAAV;AADuC,GAArB,CAA9B;AAIA,QAAMY,UAAU,GAAGd,IAAI,GACtBK,KAAK,gBACJ,QAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,KAAd;AAAA,2BACC,QAAC,IAAD;AAAM,MAAA,IAAI,EAAC;AAAX;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,UADI,gBAKJ,QAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,OAAd;AAAsB,IAAA,KAAK,MAA3B;AAAA,2BACC,QAAC,IAAD;AAAM,MAAA,IAAI,EAAC;AAAX;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,UANqB,gBAWtB,QAAC,MAAD;AAAQ,IAAA,EAAE,EAAEb,IAAZ;AAAkB,IAAA,EAAE,EAAC,QAArB;AAA8B,IAAA,KAAK,EAAC,MAApC;AAA2C,IAAA,KAAK,MAAhD;AAAA,2BACC,QAAC,IAAD;AAAM,MAAA,IAAI,EAAC;AAAX;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,UAXD;AAgBA,sBACC,QAAC,MAAD;AAAQ,IAAA,EAAE,EAAC,KAAX;AAAiB,IAAA,aAAa,EAAC,OAA/B;AAAuC,IAAA,OAAO,EAAEkB,QAAhD;AAAA,4BACC,QAAC,OAAD;AAAS,MAAA,OAAO,EAAEL,KAAK,GAAG,aAAH,GAAmB,WAA1C;AAAA,gBACES;AADF;AAAA;AAAA;AAAA;AAAA,YADD,eAIC,QAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,KAAK,EAAC,MAAnB;AAA0B,MAAA,QAAQ,EAAC,MAAnC;AAAA,gBACEX;AADF;AAAA;AAAA;AAAA;AAAA,YAJD;AAAA;AAAA;AAAA;AAAA;AAAA,UADD;AAUA,CAvCM;;GAAMJ,U;UASON,W;;;KATPM,U;AAyCb,MAAMY,kBAAkB,GAAGjB,GAAI;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAXA;AAaA,eAAeK,UAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\nimport { Icon, Button, Label } from \"semantic-ui-react\";\n\nimport MyPopup from \"../utils/MyPopup\";\n\nexport const LikeButton = ({ user, post: { id, likeCount, likes } }) => {\n\tconst [liked, setLiked] = useState(false);\n\n\tuseEffect(() => {\n\t\tif (user && likes.find((like) => like.username === user.username)) {\n\t\t\tsetLiked(true);\n\t\t} else setLiked(false);\n\t}, [user, likes]);\n\n\tconst [likePost] = useMutation(LIKE_POST_MUTATION, {\n\t\tvariables: { postId: id },\n\t});\n\n\tconst likeButton = user ? (\n\t\tliked ? (\n\t\t\t<Button color='red'>\n\t\t\t\t<Icon name='thumbs' />\n\t\t\t</Button>\n\t\t) : (\n\t\t\t<Button color='green' basic>\n\t\t\t\t<Icon name='heart' />\n\t\t\t</Button>\n\t\t)\n\t) : (\n\t\t<Button as={Link} to='/login' color='teal' basic>\n\t\t\t<Icon name='heart' />\n\t\t</Button>\n\t);\n\n\treturn (\n\t\t<Button as='div' labelPosition='right' onClick={likePost}>\n\t\t\t<MyPopup content={liked ? \"Unlike post\" : \"Like post\"}>\n\t\t\t\t{likeButton}\n\t\t\t</MyPopup>\n\t\t\t<Label basic color='teal' pointing='left'>\n\t\t\t\t{likeCount}\n\t\t\t</Label>\n\t\t</Button>\n\t);\n};\n\nconst LIKE_POST_MUTATION = gql`\n\tmutation likePost($postId: ID!) {\n\t\tlikePost(postId: $postId) {\n\t\t\tid\n\t\t\tlikes {\n\t\t\t\tid\n\t\t\t\tusername\n\t\t\t}\n\t\t\tlikeCount\n\t\t}\n\t}\n`;\n\nexport default LikeButton;\n"]},"metadata":{},"sourceType":"module"}